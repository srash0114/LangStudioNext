(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{672:(e,a,r)=>{"use strict";r.d(a,{A:()=>d});var t=r(5155),s=r(9434),l=r(2115);let d=e=>{let{className:a,label:r,type:d,placeholder:i,required:n,disabled:o,active:c,handleChange:m,icon:u,...p}=e,h=(0,l.useId)();return(0,t.jsxs)("div",{className:a,children:[(0,t.jsxs)("label",{htmlFor:h,className:"text-body-sm font-medium text-dark dark:text-white",children:[r,n&&(0,t.jsx)("span",{className:"ml-1 select-none text-red",children:"*"})]}),(0,t.jsxs)("div",{className:(0,s.cn)("relative mt-3 [&_svg]:absolute [&_svg]:top-1/2 [&_svg]:-translate-y-1/2","left"===p.iconPosition?"[&_svg]:left-4.5":"[&_svg]:right-4.5"),children:[(0,t.jsx)("input",{id:h,type:d,name:p.name,placeholder:i,onChange:m,value:p.value,defaultValue:p.defaultValue,className:(0,s.cn)("w-full rounded-lg border-[1.5px] border-stroke bg-transparent outline-none transition focus:border-primary disabled:cursor-default disabled:bg-gray-2 data-[active=true]:border-primary dark:border-dark-3 dark:bg-dark-2 dark:focus:border-primary dark:disabled:bg-dark dark:data-[active=true]:border-primary","file"===d?"style1"===p.fileStyleVariant?"file:mr-5 file:border-collapse file:cursor-pointer file:border-0 file:border-r file:border-solid file:border-stroke file:bg-[#E2E8F0] file:px-6.5 file:py-[13px] file:text-body-sm file:font-medium file:text-dark-5 file:hover:bg-primary file:hover:bg-opacity-10 dark:file:border-dark-3 dark:file:bg-white/30 dark:file:text-white":"file:mr-4 file:rounded file:border-[0.5px] file:border-stroke file:bg-stroke file:px-2.5 file:py-1 file:text-body-xs file:font-medium file:text-dark-5 file:focus:border-primary dark:file:border-dark-3 dark:file:bg-white/30 dark:file:text-white px-3 py-[9px]":"px-5.5 py-3 text-dark placeholder:text-dark-6 dark:text-white","left"===p.iconPosition&&"pl-12.5","sm"===p.height&&"py-2.5"),required:n,disabled:o,"data-active":c}),u]})]})}},952:(e,a,r)=>{Promise.resolve().then(r.bind(r,9408))},2898:(e,a,r)=>{"use strict";r.d(a,{r:()=>l,u:()=>s});var t=r(3464);async function s(){try{let e=await t.A.get("https://api.scanvirus.me/User/info",{withCredentials:!0});if(200===e.status)return e.data;return console.error("Kh\xf4ng thể lấy th\xf4ng tin người d\xf9ng:",e.status),null}catch(e){return console.error("Lỗi khi gọi API:",e),null}}async function l(){if(!(await fetch("https://api.scanvirus.me/Auth/logout",{method:"POST",credentials:"include"})).ok)throw Error("Logout failed")}},3057:()=>{},9408:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>g});var t=r(5155),s=r(6874),l=r.n(s);let d=e=>{let{pageName:a}=e;return(0,t.jsxs)("div",{className:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsx)("h2",{className:"text-[26px] font-bold leading-[30px] text-dark dark:text-white",children:a}),(0,t.jsx)("nav",{children:(0,t.jsxs)("ol",{className:"flex items-center gap-2",children:[(0,t.jsx)("li",{children:(0,t.jsx)(l(),{className:"font-medium",href:"/",children:"Dashboard /"})}),(0,t.jsx)("li",{className:"font-medium text-primary",children:a})]})})]})};var i=r(2115),n=r(3513),o=r(672),c=r(9434);function m(e){let{title:a,children:r,className:s}=e;return(0,t.jsxs)("div",{className:"rounded-[10px] bg-white shadow-1 dark:bg-gray-dark dark:shadow-card",children:[(0,t.jsx)("h2",{className:"border-b border-stroke px-4 py-4 font-medium text-dark dark:border-dark-3 dark:text-white sm:px-6 xl:px-7.5",children:a}),(0,t.jsx)("div",{className:(0,c.cn)("p-4 sm:p-6 xl:p-10",s),children:r})]})}var u=r(3464);r(3057);let p=e=>{let{userData:a}=e,[r,s]=(0,i.useState)(!1),[l,d]=(0,i.useState)({fullName:""}),c=async e=>{if(e.preventDefault(),l.fullName!=(null==a?void 0:a.fullName))try{let e=await u.A.post("https://api.scanvirus.me/User/update-fullname",{fullName:l.fullName},{withCredentials:!0});200===e.status?(s(!0),window.dispatchEvent(new Event("update-header")),console.log("Cập nhật th\xe0nh c\xf4ng:",e.data),setTimeout(()=>{s(!1)},5e3)):console.error("Kh\xf4ng thể cập nhật:",e.status)}catch(e){console.error(e)}console.log("Submit data:",l)};return a?(0,t.jsx)(m,{title:"Personal Information",className:"!p-7",children:(0,t.jsxs)("form",{onSubmit:c,children:[r&&(0,t.jsxs)("div",{className:"pyro",children:[(0,t.jsx)("div",{className:"before"}),(0,t.jsx)("div",{className:"after"})]}),(0,t.jsx)(o.A,{className:"mb-5.5",type:"email",name:"email",label:"Email Address",placeholder:a.email,defaultValue:a.email,disabled:!0,icon:(0,t.jsx)(n.aZ,{}),iconPosition:"left",height:"sm"}),(0,t.jsx)(o.A,{className:"mb-5.5",type:"text",name:"fullName",label:"Full Name",placeholder:a.fullName,defaultValue:a.fullName,handleChange:e=>{d({...l,[e.target.name]:e.target.value})},icon:(0,t.jsx)(n.ny,{}),iconPosition:"left",height:"sm"}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)("button",{className:"rounded-lg border border-stroke px-6 py-[7px] font-medium text-dark hover:shadow-1    dark:border-dark-3 dark:text-white",type:"button",onClick:()=>d({fullName:a.fullName}),children:"Cancel"}),(0,t.jsx)("button",{className:"rounded-lg bg-primary px-6 py-[7px] font-medium text-gray-2 hover:bg-opacity-90",type:"submit",children:"Save"})]})]})}):"vui l\xf2ng đăng nhập"};var h=r(6766);let x=e=>{let{userData:a}=e,[r,s]=(0,i.useState)(null),[l,d]=(0,i.useState)(!1),[o,c]=(0,i.useState)(!1),[p,x]=(0,i.useState)(null);if(!a)return(0,t.jsx)("div",{children:"Vui l\xf2ng đăng nhập"});let f=async e=>{if(e.preventDefault(),!r)return;d(!0);let a=new FormData;a.append("avatar",r);try{let e=await u.A.post("https://api.scanvirus.me/User/update-avatar",a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});200===e.status&&(window.dispatchEvent(new Event("update-header")),c(!0),setTimeout(()=>{c(!1)},5e3))}catch(e){console.error(e)}finally{d(!1),s(null),x(null)}};return(0,t.jsxs)(m,{title:"Your Photo",className:"!p-7",children:[o&&(0,t.jsxs)("div",{className:"pyro",children:[(0,t.jsx)("div",{className:"before"}),(0,t.jsx)("div",{className:"after"})]}),(0,t.jsxs)("form",{onSubmit:f,children:[(0,t.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[(0,t.jsx)(h.default,{src:p||(null==a?void 0:a.avatarUrl)||"/default-avatar.png",width:55,height:55,alt:"User",className:"size-14 rounded-full object-cover",quality:90}),(0,t.jsx)("div",{children:(0,t.jsx)("span",{className:"mb-1.5 font-medium text-dark dark:text-white",children:"Edit your photo"})})]}),(0,t.jsxs)("div",{className:"relative mb-5.5 block w-full rounded-xl border border-dashed border-gray-4 bg-gray-2 hover:border-primary dark:border-dark-3 dark:bg-dark-2 dark:hover:border-primary",children:[(0,t.jsx)("input",{type:"file",name:"profilePhoto",id:"profilePhoto",accept:"image/png, image/jpg, image/jpeg",onChange:e=>{if(e.target.files&&e.target.files[0]){let a=e.target.files[0];s(a),x(URL.createObjectURL(a))}},hidden:!0}),(0,t.jsxs)("label",{htmlFor:"profilePhoto",className:"flex cursor-pointer flex-col items-center justify-center p-4 sm:py-7.5",children:[(0,t.jsx)("div",{className:"flex size-13.5 items-center justify-center rounded-full border border-stroke bg-white dark:border-dark-3 dark:bg-gray-dark",children:(0,t.jsx)(n.JM,{})}),(0,t.jsxs)("p",{className:"mt-2.5 text-body-sm font-medium",children:[(0,t.jsx)("span",{className:"text-primary",children:"Click to upload"})," or drag and drop"]}),(0,t.jsx)("p",{className:"mt-1 text-body-xs",children:"SVG, PNG, JPG or GIF (max, 800 X 800px)"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)("button",{className:"flex justify-center rounded-lg border border-stroke px-6 py-[7px] font-medium text-dark hover:shadow-1 dark:border-dark-3 dark:text-white",type:"button",onClick:()=>{s(null),x(null)},disabled:l,children:"Cancel"}),(0,t.jsx)("button",{className:"flex items-center justify-center rounded-lg bg-primary px-6 py-[7px] font-medium text-gray-2 hover:bg-opacity-90",type:"submit",disabled:l,children:l?"Đang lưu...":"Save"})]})]})]})};function f(){let[e,a]=(0,i.useState)(!1),[r,s]=(0,i.useState)({oldpassword:"",newpassword:"",repassword:""}),[l,d]=(0,i.useState)(!1),c=e=>{s({...r,[e.target.name]:e.target.value})},p=async e=>{if(e.preventDefault(),r.newpassword===r.repassword)try{let e=await u.A.post("https://api.scanvirus.me/User/change-password",{currentPassword:r.oldpassword,newPassword:r.newpassword},{withCredentials:!0});200===e.status?(d(!1),a(!0),window.dispatchEvent(new Event("update-header")),console.log("Cập nhật th\xe0nh c\xf4ng:",e.data),setTimeout(()=>{a(!1)},5e3)):console.error("Kh\xf4ng thể cập nhật:",e.status)}catch(e){console.error(e)}console.log("Submit data:",r)};return(0,t.jsxs)(m,{title:"Change Password",className:"!p-7",children:[(0,t.jsxs)("div",{className:"relative",children:[e&&(0,t.jsxs)("div",{className:"pyro",children:[(0,t.jsx)("div",{className:"before"}),(0,t.jsx)("div",{className:"after"})]}),(0,t.jsx)("input",{className:"form-datepicker w-full rounded-[7px] border-[1.5px]    border-stroke bg-transparent px-5 py-3 font-normal outline-none    transition focus:border-primary active:border-primary dark:border-dark-3    dark:bg-dark-2 dark:focus:border-primary cursor-pointer",placeholder:"Change Password","data-class":"flatpickr-right",readOnly:!0,onClick:()=>d(!0)}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 left-auto right-5 flex items-center text-dark-4 dark:text-dark-6",children:(0,t.jsx)(n.Mt,{className:"rotate-90"})})]}),l&&(0,t.jsx)("div",{className:"fixed inset-0 z-[999] flex justify-center items-center bg-gray-500 bg-opacity-50",children:(0,t.jsxs)("div",{className:"bg-white z-[999] p-6 rounded-lg shadow-lg w-11/12 sm:w-1/3 md:w-1/4 lg:w-1/5 dark:bg-gray-dark dark:shadow-card",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Change Your Password"}),(0,t.jsxs)("form",{onSubmit:p,children:[(0,t.jsx)(o.A,{className:"mt-2.5",type:"password",name:"oldpassword",label:"Old Password",placeholder:"Old Password",handleChange:c,required:!0}),(0,t.jsx)(o.A,{className:"mt-2.5",type:"password",name:"newpassword",label:"New Password",placeholder:"New Password",handleChange:c,required:!0}),(0,t.jsx)(o.A,{className:"mt-2 mb-4.5",type:"password",name:"repassword",label:"Re Password",placeholder:"Re Password",handleChange:c,required:!0}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("button",{type:"submit",className:"rounded-lg bg-primary px-6 py-[7px] font-medium text-gray-2 hover:bg-opacity-90",children:"Submit"}),(0,t.jsx)("button",{type:"button",onClick:()=>d(!1),className:"rounded-lg border border-stroke px-6 py-[7px] font-medium text-dark hover:shadow-1 dark:border-dark-3 dark:text-white",children:"Cancel"})]})]})]})})]})}var b=r(2898);function g(){let[e,a]=(0,i.useState)(null),r=(0,i.useCallback)(async()=>{a(await (0,b.u)())},[]);return((0,i.useEffect)(()=>{r();let e=()=>{r()};return window.addEventListener("update-header",e),()=>{window.removeEventListener("update-header",e)}},[r]),e)?(0,t.jsxs)("div",{className:"mx-auto w-full max-w-[1080px]",children:[(0,t.jsx)(d,{pageName:"Profile"}),(0,t.jsxs)("div",{className:"grid grid-cols-5 gap-8",children:[(0,t.jsxs)("div",{className:"col-span-5 xl:col-span-3",children:[(0,t.jsx)(p,{userData:e}),(0,t.jsx)("div",{className:"mt-6.5",children:(0,t.jsx)(f,{})})]}),(0,t.jsx)("div",{className:"col-span-5 xl:col-span-2",children:(0,t.jsx)(x,{userData:e})})]})]}):"Vui l\xf2ng đăng nhập"}}},e=>{var a=a=>e(e.s=a);e.O(0,[496,277,874,464,766,474,441,684,358],()=>a(952)),_N_E=e.O()}]);